<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@300;400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <title>ゲームセレクト</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/MotionPathPlugin.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Zen Kaku Gothic New", "Arial", sans-serif;
        background: #111;
        color: #fff;
      }

      .motionpath-wrap {
        width: 100%;
        height: 450vh;
        position: relative;
        overflow: clip;
      }

      .motionpath-content {
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100vh;
        display: flex;
        position: sticky;
        top: 0;
      }

      .motionpath-content-inner {
        justify-content: flex-start;
        align-items: center;
        width: 100%;
        height: 100%;
        display: flex;
      }

      .motionpath-content-path {
        width: 100vmax;
        height: 100%;
        max-height: 45vh;
      }

      .motionpath-svg {
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
      }

      .motionpath-content-wrap {
        z-index: 1;
        position: absolute;
      }

      .motionpath-content-item {
        grid-column-gap: 2em;
        grid-row-gap: 2em;
        justify-content: flex-start;
        align-items: flex-start;
        display: flex;
        position: absolute;
      }

      .motionpath-content-item__visual {
        aspect-ratio: 16 / 10;
        border-radius: 0.75em;
        flex: none;
        width: max(28vw, 14rem);
        overflow: hidden;
        position: relative;
      }

      .motionpath-content-item__visual::after {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.3);
        pointer-events: none;
      }

      .motionpath-content-item__img {
        object-fit: cover;
        width: 100%;
        height: 100%;
      }

      .motionpath-content-item__details {
        grid-column-gap: 0.75em;
        grid-row-gap: 0.75em;
        white-space: nowrap;
        flex-flow: column;
        justify-content: flex-end;
        align-items: flex-start;
        padding-top: 2em;
        display: flex;
      }

      .motionpath-content-item__title {
        margin-top: 0;
        margin-bottom: 0;
        font-size: 2em;
        font-weight: 500;
        line-height: 1;
      }

      .motionpath-content-item__label {
        color: #fff;
        background-color: rgba(255, 255, 255, 0.15);
        border-radius: 100em;
        padding: 0.5em 0.75em;
        font-size: 0.75em;
        font-weight: 500;
        line-height: 1.2;
      }

      .motionpath-content-item__desc {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9em;
        margin-bottom: 0.5em;
      }

      .play-btn {
        padding: 10px 30px;
        border-radius: 4px;
        background: #fff;
        color: #111;
        border: none;
        font-size: 0.85rem;
        font-weight: bold;
        letter-spacing: 0.1em;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: inherit;
        text-decoration: none;
        display: inline-block;
      }

      .play-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
      }

      .motionpath-content-title {
        z-index: 0;
        color: rgba(255, 255, 255, 0.05);
        margin-top: 0;
        margin-bottom: 0;
        font-size: 18vw;
        font-weight: 900;
        line-height: 0.9;
        position: absolute;
        white-space: nowrap;
        letter-spacing: -0.02em;
      }

      /* スクロールヒント */
      .scroll-hint {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.8rem;
        letter-spacing: 0.2em;
        z-index: 100;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .scroll-hint::after {
        content: "";
        width: 1px;
        height: 30px;
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.5), transparent);
        animation: scrollBounce 1.5s ease-in-out infinite;
      }

      @keyframes scrollBounce {
        0%, 100% { transform: translateY(0); opacity: 1; }
        50% { transform: translateY(10px); opacity: 0.3; }
      }

      @media screen and (max-width: 767px) {
        .motionpath-content-inner {
          justify-content: flex-start;
          align-items: flex-start;
        }

        .motionpath-content-path {
          max-height: 70vh;
        }

        .motionpath-content-item {
          grid-column-gap: 1em;
          grid-row-gap: 1em;
        }

        .motionpath-content-item__visual {
          width: max(50vw, 10rem);
        }

        .motionpath-content-item__details {
          grid-column-gap: 0.5em;
          grid-row-gap: 0.5em;
          padding-top: 1em;
        }

        .motionpath-content-item__title {
          font-size: 1.25em;
        }

        .motionpath-content-item__label {
          font-size: 0.625em;
        }

        .motionpath-content-title {
          font-size: 12vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="scroll-hint">SCROLL</div>

    <div data-motionpath="wrap" class="motionpath-wrap">
      <div class="motionpath-content">
        <h1 class="motionpath-content-title">GAME SELECT</h1>
        <div class="motionpath-content-inner">
          <div class="motionpath-content-path">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewbox="0 0 1366 603"
              fill="transparent"
              preserveaspectratio="none"
              class="motionpath-svg"
            >
              <path
                data-motionpath="path"
                d="M1115.94 0C1297.33 38.9693 1626.89 444.65 993.816 562.057C407.372 670.816 89.0772 533.413 0 436.157"
                stroke="transparent"
              ></path>
            </svg>
          </div>
          <div class="motionpath-content-wrap">
            <div class="motionpath-content-list">
              <div data-motionpath="item" class="motionpath-content-item">
                <div class="motionpath-content-item__visual">
                  <img
                    src="shooting_game-images/shooting-bg.png"
                    alt="SHOOTING"
                    class="motionpath-content-item__img"
                  />
                </div>
                <div data-motionpath="item-details" class="motionpath-content-item__details">
                  <span class="motionpath-content-item__label">GAME 01</span>
                  <h3 class="motionpath-content-item__title">SHOOTING</h3>
                  <p class="motionpath-content-item__desc">的を撃ち抜け！</p>
                  <a href="shooting_game.html" class="play-btn">START</a>
                </div>
              </div>
              <div data-motionpath="item" class="motionpath-content-item">
                <div class="motionpath-content-item__visual">
                  <img
                    src="osaisen-images/osaisen-bg.jpg"
                    alt="OSAISEN"
                    class="motionpath-content-item__img"
                  />
                </div>
                <div data-motionpath="item-details" class="motionpath-content-item__details">
                  <span class="motionpath-content-item__label">GAME 02</span>
                  <h3 class="motionpath-content-item__title">OSAISEN</h3>
                  <p class="motionpath-content-item__desc">お賽銭を投げ入れよう！</p>
                  <a href="osaisen.html" class="play-btn">START</a>
                </div>
              </div>
              <div data-motionpath="item" class="motionpath-content-item">
                <div class="motionpath-content-item__visual">
                  <img
                    src="horse_game-images/uma.png"
                    alt="HORSE RACE"
                    class="motionpath-content-item__img"
                  />
                </div>
                <div data-motionpath="item-details" class="motionpath-content-item__details">
                  <span class="motionpath-content-item__label">GAME 03</span>
                  <h3 class="motionpath-content-item__title">HORSE RACE</h3>
                  <p class="motionpath-content-item__desc">干支レースで1位を目指せ！</p>
                  <a href="horse_game.html" class="play-btn">START</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);

      function initImagesOnPathScroll() {
        const wrap = document.querySelector('[data-motionpath="wrap"]');
        const path = wrap.querySelector('[data-motionpath="path"]');
        const items = wrap.querySelectorAll('[data-motionpath="item"]');
        const itemDetails = wrap.querySelectorAll('[data-motionpath="item-details"]');

        // Set z-index on items, to make sure the 1st item is on top
        gsap.set(items, {
          zIndex: (i, target, all) => all.length - i,
        });

        // if there's an old timeline, grab its progress, reset it, then kill it
        const oldTl = initImagesOnPathScroll.tl;
        let progress = 0;

        if (oldTl) {
          progress = oldTl.progress();
          oldTl.progress(0).kill();
        }

        // create a new timeline + ScrollTrigger
        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: wrap,
            start: "top top",
            end: "bottom bottom",
            scrub: true,
          },
          defaults: {
            ease: "none",
            stagger: 0.3, // Define the space between each item
          },
        });

        tl.to(items, {
          duration: 1,
          motionPath: { path, align: path, curviness: 2, alignOrigin: [0.5, 0.5] },
        })
          .fromTo(items, { autoAlpha: 0 }, { autoAlpha: 1, duration: 0.1 }, 0)
          .fromTo(items, { filter: "blur(1.5em)" }, { filter: "blur(0em)", duration: 0.5 }, 0)
          .fromTo(itemDetails, { autoAlpha: 0, yPercent: 25 }, { autoAlpha: 1, yPercent: 0, duration: 0.1 }, 0.5)
          .fromTo(items, { scale: 0.4 }, { scale: 1, duration: 0.65 }, 0)
          .to(items, { autoAlpha: 0, filter: "blur(1em)", duration: 0.15 }, 0.85)
          .to(itemDetails, { autoAlpha: 0, duration: 0.05 }, 0.9);

        // jump back to previous spot and refresh
        tl.progress(progress);
        ScrollTrigger.refresh();

        // store it on the function so we can grab it next time
        initImagesOnPathScroll.tl = tl;

        // on first run bind a single debounced resize listener
        if (!initImagesOnPathScroll.resizeHandler) {
          initImagesOnPathScroll.resizeHandler = debounce(() => {
            initImagesOnPathScroll();
          }, 200);
          window.addEventListener("resize", initImagesOnPathScroll.resizeHandler);
        }

        return tl;
      }

      function debounce(fn, delay = 200) {
        let timeout;
        return () => {
          clearTimeout(timeout);
          timeout = setTimeout(fn, delay);
        };
      }

      // スクロールヒントを非表示にする
      function hideScrollHint() {
        const hint = document.querySelector('.scroll-hint');
        if (hint) {
          gsap.to(hint, { autoAlpha: 0, duration: 0.5 });
        }
      }

      // Initialize Follow SVG Path on Scroll
      document.addEventListener("DOMContentLoaded", () => {
        initImagesOnPathScroll();

        // 少しスクロールしたらヒントを非表示
        ScrollTrigger.create({
          trigger: document.body,
          start: "top -50",
          onEnter: hideScrollHint,
          once: true,
        });
      });
    </script>
  </body>
</html>
